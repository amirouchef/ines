<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental History Score</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Georgia', serif;
            background-color: transparent;
            overflow: hidden;
        }

        .score-banner {
            background: linear-gradient(135deg, #8B6F47 0%, #5C4A2F 100%);
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 50px;
            max-height: 50px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            border-bottom: 3px solid #3D2F1F;
        }

        .score-label {
            color: #F5E6D3;
            font-size: 14px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .score-display {
            background-color: #3D2F1F;
            color: #FFD700;
            font-size: 22px;
            font-weight: bold;
            padding: 4px 16px;
            border-radius: 20px;
            min-width: 50px;
            text-align: center;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pulse {
            animation: pulse 0.3s ease;
        }
    </style>
</head>

<body>
    <div class="score-banner">
        <span class="score-label">ðŸ¦· SCORE</span>
        <div class="score-display" id="scoreDisplay">0</div>
    </div>

    <script>
        let score = 0;

        // Charger le score sauvegardÃ©
        window.onload = () => {
            const savedScore = localStorage.getItem('dentalScore');
            if (savedScore !== null) {
                score = parseInt(savedScore);
                updateDisplay();
            }
        };

        // Mise Ã  jour du score
        function updateDisplay() {
            const el = document.getElementById('scoreDisplay');
            el.textContent = score;
            localStorage.setItem('dentalScore', score);

            el.classList.remove('pulse');
            void el.offsetWidth;
            el.classList.add('pulse');
        }

        // Messages venant de Genially
        window.addEventListener('message', (event) => {
            if (!event.data) return;

            if (event.data.action === 'correct') {
                score++;
                updateDisplay();
            }

            if (event.data.action === 'wrong') {
                score--;
                updateDisplay();
            }

            if (event.data.action === 'reset') {
                score = 0;
                updateDisplay();
            }
        });

        // Pour test externe
        window.updateScore = (change) => {
            score += change;
            updateDisplay();
        };
    </script>
</body>
</html>
